{% extends "main/base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<section class="h-100 gradient-custom-2">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-lg-9 col-xl-7">
                <div class="card">
                    <div class="rounded-top text-white d-flex flex-row" style="background-color: #000; height:200px;">
                        <div class="ms-4 mt-5 d-flex flex-column" style="width: 150px;">
                            <img src="{{ user.profile.image.url }}"
                                 alt="Generic placeholder image" class="img-fluid img-thumbnail mt-4 mb-2"
                                 style="width: 150px; z-index: 1">
                            <a href="{% url 'refact' %}" class="btn btn-outline-dark" style="z-index: 1;">Редактировать
                                профиль</a>
                        </div>
                        <div class="ms-3" style="margin-top: 130px;">
                            <h5>{{ user.username }}</h5>
                            <p>{{ user.email }}</p>
                        </div>
                    </div>
                    <div class="p-4 text-black" style="background-color: #f8f9fa;">
                        <div class="d-flex justify-content-end text-center py-1">
                            <div>
                                <p class="mb-1 h5">253</p>
                                <p class="small text-muted mb-0">Публикации</p>
                            </div>
                            <div class="px-3">
                                <p class="mb-1 h5">1026</p>
                                <p class="small text-muted mb-0">Подписчиков</p>
                            </div>
                            <div>
                                <p class="mb-1 h5">478</p>
                                <p class="small text-muted mb-0">Оценок</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-4 text-black">
                        <div class="mb-5">
                            <p class="lead fw-normal mb-1">О нас:</p>
                            <div class="p-4" style="background-color: #f8f9fa;">
                                <p class="font-italic mb-1"></p>
                                <p class="font-italic mb-1"></p>
                                <p class="font-italic mb-0"></p>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3><p class="lead fw-normal mb-0">Ваши посты:</p></h3>
                            <p class="mb-0"><a href="#!" class="btn btn-default">Show all</a></p>
                        </div>

                        {% for post in post_list %}
                        {% if user == post.author %}

                        <div class="col p-1">
                            <div class="card shadow-sm ">
                                <a href="{{ post.id }}"><img src="{{ post.img.url }}" class="img-fluid rounded-top"></a>
                                <div class="card-body">
                                    <h6><a class="text-decoration-none text-reset" href="{{ post.id }}">
                                        <h3><p class="card-text">
                                            <ya-tr-span data-index="1-0" data-translated="true" data-source-lang="en"
                                                        data-target-lang="ru"
                                                        data-value="This is a wider card with supporting text below as a natural lead-in to additional content. "
                                                        data-ch="0" data-type="trSpan">{{ post.title }}
                                            </ya-tr-span>
                                            <ya-tr-span data-index="1-1" data-translated="true" data-source-lang="en"
                                                        data-target-lang="ru"
                                                        data-value="This content is a little bit longer."
                                                        data-translation="Этот контент немного длиннее." data-ch="0"
                                                        data-type="trSpan"></ya-tr-span>
                                        </p></h3>
                                    </a></h6>
                                    <div class="d-flex justify-content-between align-items-center ">
                                        <div class="btn-group">
                                            <img href="{{ post.id }}" src="{{ post.author.profile.image.url }}"
                                                 class="rounded-circle" width="40" height="40" alt="Фото">
                                            <a href="{% url 'user-posts' post.author.username %}"
                                               class="text-dark btn p-1 m-1">
                                                <ya-tr-span data-index="2-0" data-translated="true"
                                                            data-source-lang="en" data-target-lang="ru"
                                                            data-value="View" data-translation="Вид" data-ch="0"
                                                            data-type="trSpan"><h6><strong>{{ post.author }}</strong>
                                                </h6>
                                                </ya-tr-span>
                                            </a>
                                        </div>
                                        <small class="text-body-secondary">
                                            <ya-tr-span data-index="3-0" data-translated="true" data-source-lang="en"
                                                        data-target-lang="ru" data-value="9 mins"
                                                        data-translation="9 минут" data-ch="0" data-type="trSpan">{{ post.created_at }}
                                            </ya-tr-span>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
</section>
{% endblock content %}